{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "ucc.prover_manifest.v2",
  "type": "object",
  "additionalProperties": false,
  "required": ["schema_id","version","vote_dir","verifier_id","circuit_id","backend","artifacts","outputs","public_inputs"],
  "properties": {
    "schema_id": { "const": "ucc.prover_manifest.v2" },
    "version": { "const": 2 },
    "created_at": { "type": "string" },

    "vote_dir": { "type": "string", "minLength": 1 },
    "vote_manifest_path": { "type": "string" },

    "verifier_id": { "type": "string", "minLength": 1 },
    "circuit_id": { "type": "string", "minLength": 1 },

    "backend": {
      "type": "object",
      "additionalProperties": false,
      "required": ["name","alg","mode"],
      "properties": {
        "name": { "enum": ["snarkjs"] },
        "alg": { "enum": ["GROTH16","PLONK"] },
        "mode": { "enum": ["fullprover","prove"] }
      }
    },

    "artifacts": {
      "type": "object",
      "additionalProperties": false,
      "required": ["vk_path","proof_json_path","public_json_path"],
      "properties": {
        "vk_path": { "type": "string", "minLength": 1 },
        "wasm_path": { "type": "string" },
        "zkey_path": { "type": "string" },
        "input_json_path": { "type": "string" },
        "witness_path": { "type": "string" },
        "proof_json_path": { "type": "string", "minLength": 1 },
        "public_json_path": { "type": "string", "minLength": 1 }
      }
    },

    "outputs": {
      "type": "object",
      "additionalProperties": false,
      "required": ["proof_envelope_path"],
      "properties": {
        "proof_envelope_path": { "type": "string", "minLength": 1 }
      }
    },

    "public_inputs": {
      "type": "object",
      "additionalProperties": false,
      "required": ["format","version","order","strict"],
      "properties": {
        "format": { "const": "snarkjs.public_inputs.v1" },
        "version": { "const": 1 },
        "strict": { "type": "boolean" },
        "order": {
          "type": "array",
          "minItems": 1,
          "items": { "type": "string", "minLength": 1 }
        }
      }
    },

    "notes": { "type": "string" }
  }
}
